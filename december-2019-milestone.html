<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="LoopBack RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="LoopBack Atom Feed"><title data-react-helmet="true">LoopBack 4 December 2019 Milestone Update | LoopBack</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://blog.loopback.io/december-2019-milestone"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="LoopBack 4 December 2019 Milestone Update | LoopBack"><meta data-react-helmet="true" name="description" content="Originally published on strongloop.com"><meta data-react-helmet="true" property="og:description" content="Originally published on strongloop.com"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2020-01-08T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/agnes512"><meta data-react-helmet="true" property="article:tag" content="Milestone update"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://blog.loopback.io/december-2019-milestone"><link data-react-helmet="true" rel="alternate" href="https://blog.loopback.io/december-2019-milestone" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://blog.loopback.io/december-2019-milestone" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.137bdc1f.css">
<link rel="preload" href="/assets/js/runtime~main.5d2ec556.js" as="script">
<link rel="preload" href="/assets/js/main.6de7e2dd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="LoopBack Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="LoopBack Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">LoopBack</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/loopbackio/loopback-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/november-2020-milestone">LoopBack 4 November 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/october-2020-milestone">LoopBack 4 October 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-oct-slack-qa">Community Q&amp;A Monthly Digest - Oct 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/loopback-4-2020-q3-overview">LoopBack 4 2020 Q3 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-lb3-eol">LoopBack 3 End-of-Life</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/september-2020-milestone">LoopBack 4 September 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-hacktoberfest">LoopBack is participating in Hacktoberfest 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-sept-slack-qa">Community Q&amp;A Monthly Digest - Sept 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/august-2020-milestone">LoopBack 4 August 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-community-contribution">Enriching LoopBack and its Community - You are Invited!</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-jul-slack-qa">Community Q&amp;A Monthly Digest - July 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/july-2020-milestone">LoopBack 4 July 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/switching-to-dco">Making Your Contribution Process Simpler - Switching from CLA to DCO</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-Jun-slack-qa">Community Q&amp;A Monthly Digest - Jun 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/loopback-4-2020-q2-overview">LoopBack 4 2020 Q2 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/june-2020-milestone">LoopBack 4 June 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-may-slack-qa">Community Q&amp;A Monthly Digest - May 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-improve-looopback-performance-uuid">How We Improved LoopBack REST Performance by 45%</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/may-2020-milestone">LoopBack 4 May 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-share-repository-code">How to reuse custom LoopBack Repository code</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/express-to-loopback">LoopBack - Taking Express to the Next Level</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/april-2020-milestone">LoopBack 4 April 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-april-slack-qa">Community Q&amp;A Monthly Digest - April 2020</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/model-to-rest-api-feature">Build REST APIs for CRUD operations from a model without coding</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/loopback-4-2020-q1-overview">LoopBack 4 2020 Q1 Overview</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/march-2020-milestone">LoopBack 4 March 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/february-2020-milestone">LoopBack 4 February 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2020-goals">LoopBack - 2020 Goals and Focus</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/lb3-entered-maintenance-mode">LoopBack 3 has entered Maintenance LTS</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/january-2020-milestone">LoopBack 4 January 2020 Milestone Update</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/loopback4-2019-q4-overview">LoopBack 4 2019 Q4 Overview</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/december-2019-milestone">LoopBack 4 December 2019 Milestone Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">LoopBack 4 December 2019 Milestone Update</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2020-01-08T00:00:00.000Z" itemprop="datePublished">January 8, 2020</time> · <!-- -->11 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/agnes512" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://avatars3.githubusercontent.com/u/50331796" alt="Agnes Lin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/agnes512" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Agnes Lin</span></a></div><small class="avatar__subtitle" itemprop="description">LoopBack Maintainer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><em>Originally published on <a href="https://strongloop.com" target="_blank" rel="noopener noreferrer">strongloop.com</a></em></p><p>It&#x27;s 2️⃣0️⃣2️⃣0️⃣!</p><p>Happy New Year! Is the snow dancing outside of your window or is the sunshine bringing warmth and glow to the grass around you? No matter where you are, the LoopBack team is thankful for you being with us through 2019! It means a lot to us that you choose LoopBack for your applications and projects.</p><p>We&#x27;re also excited to have <a href="https://github.com/derdeka" target="_blank" rel="noopener noreferrer">Denny</a>, <a href="https://github.com/dougal83" target="_blank" rel="noopener noreferrer">Douglas</a>, and <a href="https://github.com/achrinza" target="_blank" rel="noopener noreferrer">Rifa</a> as LoopBack maintainers! They&#x27;ve been actively helpful in our community. We appreciate all the contributions and great work. Welcome to the team!</p><p>Even though this past December was a short month due to the holidays, the list of the accomplished tasks is not short! Check out the sections below for the progress we made in each area:</p><ul><li><a href="#from-model-definition-to-rest-api">From Model Definition to REST API</a>: build a LB4 app with just models!</li><li><a href="#inclusion-of-related-models">Inclusion of Related Models</a>: enable custom scope for inclusion.</li><li><a href="#authentication">Authentication</a>: new added user profile factory and StrategyAdapter.</li><li><a href="#allowing-interceptor-to-be-invoked-based-on-the-source">@loopback/context Improvement</a>: invoke interceptors based on their callers.</li><li><a href="#improving-application-life-cycle-states">Application Life Cycle</a>: application states and the shutdown hooks.</li><li><a href="#openapi-enhancer-service">OpenAPI Enhancer Service</a>: contribute OpenAPI spec pieces from extensions.</li><li><a href="#improving-juggler-and-connectors">Improving Juggler and Connectors</a>: new property settings.</li><li><a href="#new-eslint-rules">New ESLint Rules</a>: applied new <code>@typescript-eslint</code> rules.</li><li><a href="#documentation-improvements">Documentation Improvements</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="from-model-definition-to-rest-api">From Model Definition to REST API<a class="hash-link" href="#from-model-definition-to-rest-api" title="Direct link to heading">​</a></h2><p>Initially, LoopBack 4 required all artifacts (Model, Repository, and Controller classes) to be defined in TypeScript source files. Recently, we started to work on a declarative approach, where the Repository and Controller classes can be created dynamically at runtime (see <a href="https://github.com/strongloop/loopback-next/tree/master/packages/rest-crud" target="_blank" rel="noopener noreferrer"><code>@loopback/rest-crud</code></a> package).</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="discovering-models-and-building-rest-apis-at-runtime">Discovering Models and Building REST APIs at Runtime<a class="hash-link" href="#discovering-models-and-building-rest-apis-at-runtime" title="Direct link to heading">​</a></h3><p>This month, we pushed this concept one step further and implemented a proof of concept showing how to dynamically build CRUD REST API for any SQL database table:</p><ol><li>Discover model definition from a database, build <code>ModelDefinition</code> object from the discovered schema</li><li>Define a model class from a <code>ModelDefinition</code> object</li><li>Define a CRUD repository class for the given model</li><li>Define a CRUD REST API controller class for the given model &amp; repository</li></ol><p>The demo application can be found in the pull request <a href="https://github.com/strongloop/loopback-next/pull/4235" target="_blank" rel="noopener noreferrer">loopback-next #4235</a>.</p><p>To make this scenario possible, we needed to make few improvements:</p><ul><li><a href="https://github.com/strongloop/loopback-datasource-juggler/pull/1807" target="_blank" rel="noopener noreferrer">loopback-datasource-juggler #1807</a> fixes TypeScript typings in <code>loopback-datasource-juggler</code> to make DataSource APIs like <code>discoverSchema</code> easier to consume using <code>await</code> keyword.</li><li><a href="https://github.com/strongloop/loopback-next/pull/4266" target="_blank" rel="noopener noreferrer">loopback-next #4266</a> adds a new API <code>defineModelClass</code> that builds a Model class constructor using the given base model (e.g. <code>Entity</code>) and the given <code>ModelDefinition</code>.</li></ul><p>As part of the experiment, we have again encountered the limitation of our REST layer when controllers registered after startup are not picked up. This feature is discussed in <a href="https://github.com/strongloop/loopback-next/issues/433" target="_blank" rel="noopener noreferrer">loopback-next #433</a>. Feel free to chime in and perhaps contribute a pull request if this use case is important for your projects.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="model-api-builder-package">Model API Builder Package<a class="hash-link" href="#model-api-builder-package" title="Direct link to heading">​</a></h3><p>We introduced a new package <code>@loopback/model-api-builder</code> for building APIs from models. This package allows users to build repositories and controllers based on their models through their defined extensions. We also added <code>ModelApiBooter</code> that leverages Model API builders contributed via <code>ExtensionPoint</code>/<code>Extension</code> to implement the actual API building. See <a href="https://github.com/strongloop/loopback-next/tree/master/packages/model-api-builder" target="_blank" rel="noopener noreferrer">README</a> file for details.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="inclusion-of-related-models">Inclusion of Related Models<a class="hash-link" href="#inclusion-of-related-models" title="Direct link to heading">​</a></h2><p>We managed to finish the Inclusion of Related Models <a href="https://github.com/strongloop/loopback-next/issues/1352" target="_blank" rel="noopener noreferrer">MVP</a> in 2019! Check out the <a href="https://github.com/strongloop/loopback-next/issues/3585" target="_blank" rel="noopener noreferrer">Post MVP</a> if you&#x27;d like to contribute.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="enabling-inclusion-with-custom-scope">Enabling inclusion with custom scope<a class="hash-link" href="#enabling-inclusion-with-custom-scope" title="Direct link to heading">​</a></h3><p>Traversing data through different relations is a common use case in real world. Take a nested relation as an example, a <code>Customer</code> might be interested in the <code>Shipment</code> status of their <code>Order</code>:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Customer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;where\&#x27;s my order at&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  orders</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;order 1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shipment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shipment_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;order 2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      shipment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        shipment_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">999</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In <a href="https://github.com/strongloop/loopback-next/pull/4263" target="_blank" rel="noopener noreferrer">PR #4263</a>, we enabled such traversal by allowing users to customize the <code>scope</code> field for their query filter. The above example can be achieved by the following query:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">customerRepo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  include</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      relation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;orders&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      scope</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        include</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">relation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;shipment&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>More use cases and examples are added to the page <a href="https://loopback.io/doc/en/lb4/HasMany-relation.html#query-multiple-relations" target="_blank" rel="noopener noreferrer">Query Multiple Relations</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="handling-navigational-properties-with-crud-operations">Handling navigational properties with CRUD operations<a class="hash-link" href="#handling-navigational-properties-with-crud-operations" title="Direct link to heading">​</a></h3><p>It&#x27;s convenient to traverse related models with relations. However, when it comes to operations such as creation and updating, navigational properties might cause some unexpected problems. In <a href="https://github.com/strongloop/loopback-next/pull/4148" target="_blank" rel="noopener noreferrer">PR #4148</a>, we decided to reject CRUD operations that contain any navigational properties. For example, the request to create a <code>Customer</code> with its <code>Address</code> will be rejected:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">customerRepo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;customer&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      street</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;nav property&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      city</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;should not be included&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="authentication">Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="user-profile-factory-interface">User Profile Factory Interface<a class="hash-link" href="#user-profile-factory-interface" title="Direct link to heading">​</a></h3><p>We&#x27;ve added a <em>convenience</em> function interface named <a href="https://github.com/strongloop/loopback-next/blob/0630194539ba7971ca6c6579ebb9d986e6340a41/packages/authentication/src/types.ts#L34-L36" target="_blank" rel="noopener noreferrer"><code>UserProfileFactory&lt;U&gt;</code></a> to <code>@loopback/authentication</code>. Implement this interface with your own custom user profile factory function to convert your specific user model into a <a href="https://github.com/strongloop/loopback-next/blob/9e40e43bd1c9fe71155087341b0fc590ee9d67e3/packages/security/src/types.ts#L37-L42" target="_blank" rel="noopener noreferrer">UserProfile</a> model (used by both <code>@loopback/authentication</code> and <code>@loopback/authorization</code>).</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="strategyadapter-improvements">StrategyAdapter Improvements<a class="hash-link" href="#strategyadapter-improvements" title="Direct link to heading">​</a></h3><p>The <code>StrategyAdapter</code> in <code>@loopback/authentication-passport</code> now takes in an additional argument <code>userProfileFactory</code> in its constructor. This argument is initialized with a default implementation of the <code>UserProfileFactory&lt;U&gt;</code> interface, mentioned above, and simply returns your specific user model as a user profile model. It is recommended that you implement your own user profile factory function to map a specific/minimal set of properties from your custom user model to the user profile model. Please see the <a href="https://github.com/strongloop/loopback-next/tree/master/extensions/authentication-passport" target="_blank" rel="noopener noreferrer">updated documentation</a> for more details.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="allowing-interceptor-to-be-invoked-based-on-the-source">Allowing Interceptor to Be Invoked Based on the Source<a class="hash-link" href="#allowing-interceptor-to-be-invoked-based-on-the-source" title="Direct link to heading">​</a></h2><p>Some interceptors want to check the caller to decide if its logic should be applied. For example, an http access logger only cares about invocations from the rest layer to the first controller. In <a href="https://github.com/strongloop/loopback-next/pull/4168" target="_blank" rel="noopener noreferrer">PR #4168</a>, we added an option <code>source</code>, which can check the caller that invokes a method with interceptors. Check out the <a href="https://loopback.io/doc/en/lb4/Interceptors.html#source-for-an-invocation" target="_blank" rel="noopener noreferrer">Interceptors page</a> for relative documentation and examples.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="improving-application-life-cycle-states">Improving Application Life Cycle States<a class="hash-link" href="#improving-application-life-cycle-states" title="Direct link to heading">​</a></h2><p>It’s often desirable for various types of artifacts to participate in the life cycles and perform related operations. In <a href="https://github.com/strongloop/loopback-next/pull/4145" target="_blank" rel="noopener noreferrer">PR #4145</a>, we improved the the check for application states and also add the shutdown hooks which allows graceful shutdown when the application is running inside a managed container such as Kubernetes Pods. Please check the related documentation and examples on the site <a href="https://loopback.io/doc/en/lb4/Life-cycle.html#application-states" target="_blank" rel="noopener noreferrer">Life cycle events and observers</a> to help you understand more about the LoopBack 4 application life cycle.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="openapi-enhancer-service">OpenAPI Enhancer Service<a class="hash-link" href="#openapi-enhancer-service" title="Direct link to heading">​</a></h2><p>We&#x27;ve added a new extension point <code>OASEnhancerService</code> to allow the OpenAPI specification (short for OAS) contributions to a rest application. The feature originated from the need to add security schemes and policies to a LoopBack application&#x27;s OAS. Now you can modify your application&#x27;s OAS by creating and registering OAS enhancers.</p><p>A typical OAS enhancer implements interface <code>OASEnhancer</code> which has a string type <code>name</code> field and a function <code>modifySpec()</code>. For example, to modify the <code>info</code> field of an OAS, you can create an <code>InfoSpecEnhancer</code> as follows:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">bind</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@loopback/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">  mergeOpenAPISpec</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">  asSpecEnhancer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports maybe-class-name">OASEnhancer</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports maybe-class-name">OpenApiSpec</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#393A34"><span class="token imports"></span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@loopback/openapi-v3&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">asSpecEnhancer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">InfoSpecEnhancer</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">OASEnhancer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// give your enhancer a proper name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;info&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// the function to modify your OpenAPI specification and return a new one</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">modifySpec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OpenApiSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">OpenApiSpec</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">InfoPatchSpec</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      info</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;LoopBack Test Application&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1.0.1&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mergedSpec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mergeOpenAPISpec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">InfoPatchSpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> mergedSpec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Then bind it to your application by <code>this.add(createBindingFromClass(InfoSpecEnhancer))</code>.</p><p>The OAS enhancer service organizes all the registered enhancers, and is able to apply one or all of them. You can check <a href="https://loopback.io/doc/en/lb4/Extending-OpenAPI-specification.html" target="_blank" rel="noopener noreferrer">&quot;Extending OpenAPI specification&quot;</a> documentation to learn more about creating and registering OAS enhancers, adding OAS enhancer service and applying its enhancers.</p><p>We will allow users to have token-based authentication in API Explorer in the near future. Please check our future milestone blogs.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="improving-juggler-and-connectors">Improving Juggler and Connectors<a class="hash-link" href="#improving-juggler-and-connectors" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="improving-performance---persistdefaultvalues-model-property-setting">Improving Performance - persistDefaultValues Model Property Setting<a class="hash-link" href="#improving-performance---persistdefaultvalues-model-property-setting" title="Direct link to heading">​</a></h3><p>We have added a new model-property property <code>persistDefaultValues</code>, which prevents a property value that matches the default from being written to the database when it set to <code>false</code>.</p><p>This is particularly useful when you have a model with a lot of properties or sub-properties whose values may be the default value, and these models run into thousands or maybe millions. Setting <code>persistDefaultValues</code> to <code>false</code> can drastically reduce the write time and size of the database. This setting is applicable to LB4 and LB3. Check the document on our site: <a href="https://loopback.io/doc/en/lb3/Model-definition-JSON-file.html#general-property-properties" target="_blank" rel="noopener noreferrer">Property</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="allowing-string-type-attribute-to-be-auto-generated-in-postgresql">Allowing String Type Attribute to Be Auto-generated in PostgreSQL<a class="hash-link" href="#allowing-string-type-attribute-to-be-auto-generated-in-postgresql" title="Direct link to heading">​</a></h3><p><a href="https://loopback.io/doc/en/lb4/Database-migrations.html" target="_blank" rel="noopener noreferrer">Auto-migration</a> is a convenient tool to help you create relational database schemas based on definitions of your models. Typically, auto-migration would use the database&#x27;s <em>default type</em> as the primary key type. For example, the default type of MySQL is integer, and the default type of MongoDB is string. We&#x27;ve added a field <code>useDefaultIdType</code> before that allows you to use other types than the default type when doing auto-migration. For example, for MySQL, the following setting allows you to have a string type primary key in tables:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useDefaultIdType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// generated: true -&gt; can not be set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>However, sometimes users want to have auto-generate primary key with non-default type. For instance, a common use case is having <code>uuid</code> as the primary key in MySQL or PostgreSQL. We enable the auto-generated <code>uuid</code> with auto-migration for PostgreSQL. In short, the following setting enables auto-generated <code>uuid</code>:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  generated</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  useDefaultIdType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this is needed if this property is id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  postgresql</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dataType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;uuid&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>By default, when the user wants to auto-generate string type properties in PostgreSQL, we use <code>uuid</code> and the function <code>uuid_generate_v4()</code>. It is possible to use other extensions and functions. Please check on the site for more details: <a href="https://loopback.io/doc/en/lb3/PostgreSQL-connector.html#discovery-and-auto-migration" target="_blank" rel="noopener noreferrer">PostgreSQL connector</a>.</p><p>This feature will be added to MySQL in the near future.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="new-eslint-rules">New ESLint Rules<a class="hash-link" href="#new-eslint-rules" title="Direct link to heading">​</a></h2><p>We have enabled several new <code>@typescript-eslint</code> rules to detect more kinds of potential programming errors. These new rules will trigger a semver-major release of the package <code>@loopback/eslint-config</code>. Be prepared to handle new violations after upgrading.</p><p>List of new checks:</p><ul><li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/return-await.md" target="_blank" rel="noopener noreferrer"><code>return-await</code></a></li><li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/no-extra-non-null-assertion.md" target="_blank" rel="noopener noreferrer"><code>no-extra-non-null-assertion</code></a></li><li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/prefer-nullish-coalescing.md" target="_blank" rel="noopener noreferrer"><code>prefer-nullish-coalescing</code></a></li><li><a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/docs/rules/prefer-optional-chain.md" target="_blank" rel="noopener noreferrer"><code>prefer-optional-chain</code></a></li></ul><p>As part of this effort, we migrated our code base to use <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing" target="_blank" rel="noopener noreferrer">nullish coalescing</a> and <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining" target="_blank" rel="noopener noreferrer">optional chaining</a> operators.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="documentation-improvements">Documentation Improvements<a class="hash-link" href="#documentation-improvements" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="appsody--loopback-4-tutorial">Appsody / LoopBack 4 Tutorial<a class="hash-link" href="#appsody--loopback-4-tutorial" title="Direct link to heading">​</a></h3><p><a href="https://appsody.dev/" target="_blank" rel="noopener noreferrer">Appsody</a> is an open source project that makes creating cloud native applications simple. It provides application stacks for open source runtimes and frameworks, which are pre-configured with cloud native capabilities for Kubernetes and Knative deployments.</p><p>In August, LoopBack was added as one of the application stacks in Appsody to provide a powerful solution to build open APIs and Microservices in TypeScript. The name of the stack is <a href="https://github.com/appsody/stacks/tree/master/incubator/nodejs-loopback" target="_blank" rel="noopener noreferrer">nodejs-loopback</a>.</p><p>Please refer to our tutorial <a href="https://loopback.io/doc/en/lb4/Appsody-LoopBack.html" target="_blank" rel="noopener noreferrer">Developing and Deploying LoopBack Applications with Appsody</a> for detailed instructions on how to use the Appsody CLI to:</p><ul><li>scaffold, run, stop, debug, and test a LoopBack 4 application locally</li><li>build and deploy the application to Kubernetes on the IBM Cloud</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="migrating-middleware-from-lb3-to-lb4">Migrating Middleware from LB3 to LB4<a class="hash-link" href="#migrating-middleware-from-lb3-to-lb4" title="Direct link to heading">​</a></h3><p>We enhanced the documentation and updated the tutorial of migrating LB3 application on a new LB4 app. By mounting the LB3 middleware with a base Express application, the middleware can be shared by both LB3 and LB4 apps. For example, you can use REST APIs in your LB3 app with a new LB4 application, which will be helpful if you are a LB3 user and ready to move to LoopBack 4. Check out <a href="https://loopback.io/doc/en/lb4/migration-express-middleware.html" target="_blank" rel="noopener noreferrer">Migrating Express middleware</a> for the steps and examples.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="migrating-datasources-from-lb3-to-lb4">Migrating DataSources from LB3 to LB4<a class="hash-link" href="#migrating-datasources-from-lb3-to-lb4" title="Direct link to heading">​</a></h3><p>To improve the documentation for migration from LB3 to LB4, we also added steps for migrating LB3 datasources into a LB4 project. LB3 datasources are compatible with LB4, so the datasource configuration remains the same between both. See <a href="https://loopback.io/doc/en/lb4/migration-datasources.html" target="_blank" rel="noopener noreferrer">Migrating Datasources</a> for steps on how to migrate your datasources.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="customizing-source-key-for-relations">Customizing Source Key for Relations<a class="hash-link" href="#customizing-source-key-for-relations" title="Direct link to heading">​</a></h3><p>Typically, the primary key is used as the source key in relations (i.e joining two tables). In LB4, we use <code>keyFrom</code> and <code>keyTo</code> to define the source key and foreign key respectively. If you would like to use a non-id property as your source key, setting <code>keyFrom</code> would allow you to do so. Check the <a href="https://loopback.io/doc/en/lb4/HasMany-relation.html#relation-metadata" target="_blank" rel="noopener noreferrer">Relation Metadata</a> section for details.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="other">Other<a class="hash-link" href="#other" title="Direct link to heading">​</a></h3><ul><li><p>We&#x27;ve added some links and refactored the <a href="https://loopback.io/doc/en/lb4/Using-components.html" target="_blank" rel="noopener noreferrer">Using Components</a> page to make the site better navigation.</p></li><li><p>We&#x27;ve updated the <a href="https://loopback.io/doc/en/lb4/Loopback-component-authorization.html" target="_blank" rel="noopener noreferrer">Authorization Component</a> page detailedly to match the latest code base.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="user-feedback-sessions">User Feedback Sessions<a class="hash-link" href="#user-feedback-sessions" title="Direct link to heading">​</a></h2><p>Interested in joining a user feedback session? We love to hear your input and how you are using LoopBack. If you&#x27;d like to take part or have suggestions, please join our discussion in the <a href="https://github.com/strongloop/loopback-next/issues/4264" target="_blank" rel="noopener noreferrer">GitHub issue</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="whats-next">What&#x27;s Next?<a class="hash-link" href="#whats-next" title="Direct link to heading">​</a></h2><p>If you&#x27;re interested in what we&#x27;re working on next, you can check out the <a href="https://github.com/strongloop/loopback-next/pull/4376" target="_blank" rel="noopener noreferrer">January Milestone</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="call-to-action">Call to Action<a class="hash-link" href="#call-to-action" title="Direct link to heading">​</a></h2><p>In 2020, we look forward to helping you and seeing you around! LoopBack&#x27;s success depends on you. We appreciate your continuous support and engagement to make LoopBack even better and meaningful for your API creation experience. Here&#x27;s how you can join us and help the project:</p><ul><li><a href="https://github.com/strongloop/loopback-next/issues" target="_blank" rel="noopener noreferrer">Report issues</a>.</li><li><a href="https://github.com/strongloop/loopback-next/blob/master/docs/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contribute</a> code and documentation.</li><li><a href="https://github.com/strongloop/loopback-next/labels/good%20first%20issue" target="_blank" rel="noopener noreferrer">Open a pull request on one of our &quot;good first issues&quot;</a>.</li><li><a href="https://github.com/strongloop/loopback-next/issues/110" target="_blank" rel="noopener noreferrer">Join</a> our user group.</li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/milestone-update">Milestone update</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/loopbackio/loopback-blog/blog/2020/2020-01-08-december-milestone.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/loopback4-2019-q4-overview"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">LoopBack 4 2019 Q4 Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#from-model-definition-to-rest-api" class="table-of-contents__link toc-highlight">From Model Definition to REST API</a><ul><li><a href="#discovering-models-and-building-rest-apis-at-runtime" class="table-of-contents__link toc-highlight">Discovering Models and Building REST APIs at Runtime</a></li><li><a href="#model-api-builder-package" class="table-of-contents__link toc-highlight">Model API Builder Package</a></li></ul></li><li><a href="#inclusion-of-related-models" class="table-of-contents__link toc-highlight">Inclusion of Related Models</a><ul><li><a href="#enabling-inclusion-with-custom-scope" class="table-of-contents__link toc-highlight">Enabling inclusion with custom scope</a></li><li><a href="#handling-navigational-properties-with-crud-operations" class="table-of-contents__link toc-highlight">Handling navigational properties with CRUD operations</a></li></ul></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a><ul><li><a href="#user-profile-factory-interface" class="table-of-contents__link toc-highlight">User Profile Factory Interface</a></li><li><a href="#strategyadapter-improvements" class="table-of-contents__link toc-highlight">StrategyAdapter Improvements</a></li></ul></li><li><a href="#allowing-interceptor-to-be-invoked-based-on-the-source" class="table-of-contents__link toc-highlight">Allowing Interceptor to Be Invoked Based on the Source</a></li><li><a href="#improving-application-life-cycle-states" class="table-of-contents__link toc-highlight">Improving Application Life Cycle States</a></li><li><a href="#openapi-enhancer-service" class="table-of-contents__link toc-highlight">OpenAPI Enhancer Service</a></li><li><a href="#improving-juggler-and-connectors" class="table-of-contents__link toc-highlight">Improving Juggler and Connectors</a><ul><li><a href="#improving-performance---persistdefaultvalues-model-property-setting" class="table-of-contents__link toc-highlight">Improving Performance - persistDefaultValues Model Property Setting</a></li><li><a href="#allowing-string-type-attribute-to-be-auto-generated-in-postgresql" class="table-of-contents__link toc-highlight">Allowing String Type Attribute to Be Auto-generated in PostgreSQL</a></li></ul></li><li><a href="#new-eslint-rules" class="table-of-contents__link toc-highlight">New ESLint Rules</a></li><li><a href="#documentation-improvements" class="table-of-contents__link toc-highlight">Documentation Improvements</a><ul><li><a href="#appsody--loopback-4-tutorial" class="table-of-contents__link toc-highlight">Appsody / LoopBack 4 Tutorial</a></li><li><a href="#migrating-middleware-from-lb3-to-lb4" class="table-of-contents__link toc-highlight">Migrating Middleware from LB3 to LB4</a></li><li><a href="#migrating-datasources-from-lb3-to-lb4" class="table-of-contents__link toc-highlight">Migrating DataSources from LB3 to LB4</a></li><li><a href="#customizing-source-key-for-relations" class="table-of-contents__link toc-highlight">Customizing Source Key for Relations</a></li><li><a href="#other" class="table-of-contents__link toc-highlight">Other</a></li></ul></li><li><a href="#user-feedback-sessions" class="table-of-contents__link toc-highlight">User Feedback Sessions</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li><li><a href="#call-to-action" class="table-of-contents__link toc-highlight">Call to Action</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://loopback.io/doc/en/lb4" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://loopback.io/doc/en/lb4/apidocs.index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/strongloop" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack Workspace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/groups/5046525/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Blog</a></li><li class="footer__item"><a href="https://github.com/loopbackio/loopback-next" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openjsf.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_RC3H"><img src="/img/openjs_foundation-logo.svg" alt="OpenJS Foundation logo" class="themedImage_W2Cr themedImage--light_TfLj footer__logo"><img src="/img/openjs_foundation-logo.svg" alt="OpenJS Foundation logo" class="themedImage_W2Cr themedImage--dark_oUvU footer__logo"></a></div><div class="footer__copyright"><p>Copyright <a href="https://openjsf.org">OpenJS Foundation</a> and LoopBack contributors. All rights reserved. The <a href="https://openjsf.org">OpenJS Foundation</a> has registered trademarks and uses trademarks.  For a list of trademarks of the <a href="https://openjsf.org">OpenJS Foundation</a>, please see our <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> and <a href="https://trademark-list.openjsf.org">Trademark List</a>.  Node.js is a trademark of Joyent, Inc. and is used with its permission. Trademarks and logos not indicated on the <a href="https://trademark-list.openjsf.org">list of OpenJS Foundation trademarks</a> are trademarks&trade; or registered&reg; trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.</p>
        <p><a href="https://openjsf.org">The OpenJS Foundation</a> | <a href="https://terms-of-use.openjsf.org">Terms of Use</a> | <a href="https://privacy-policy.openjsf.org">Privacy Policy</a> | <a href="https://bylaws.openjsf.org">OpenJS Foundation Bylaws</a> | <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> | <a href="https://trademark-list.openjsf.org">Trademark List</a> | <a href="https://www.linuxfoundation.org/cookies">Cookie Policy</a></p>Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d2ec556.js"></script>
<script src="/assets/js/main.6de7e2dd.js"></script>
</body>
</html>