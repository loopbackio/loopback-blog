"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[7513],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return k}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),k=a,h=m["".concat(l,".").concat(k)]||m[k]||u[k]||r;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5460:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},assets:function(){return c},toc:function(){return u},default:function(){return k}});var o=n(7462),a=n(3366),r=(n(7294),n(3905)),i=["components"],s={title:"Community Q&A Monthly Digest - Sept 2020",date:new Date("2020-09-16T00:00:00.000Z"),authors:"dhmlau",slug:"2020-sept-slack-qa",tags:["Community","Slack","Q&A"]},l=void 0,p={permalink:"/2020-sept-slack-qa",editUrl:"https://github.com/loopbackio/loopback-blog/blog/2020/2020-09-16-sept-slack-qanda.md",source:"@site/blog/2020/2020-09-16-sept-slack-qanda.md",title:"Community Q&A Monthly Digest - Sept 2020",description:"Originally published on strongloop.com",date:"2020-09-16T00:00:00.000Z",formattedDate:"September 16, 2020",tags:[{label:"Community",permalink:"/tags/community"},{label:"Slack",permalink:"/tags/slack"},{label:"Q&A",permalink:"/tags/q-a"}],readingTime:2.9,truncated:!0,authors:[{name:"Diana Lau",title:"LoopBack Maintainer",url:"https://github.com/dhmlau",imageURL:"https://avatars2.githubusercontent.com/u/25489897",key:"dhmlau"}],frontMatter:{title:"Community Q&A Monthly Digest - Sept 2020",date:"2020-09-16T00:00:00.000Z",authors:"dhmlau",slug:"2020-sept-slack-qa",tags:["Community","Slack","Q&A"]},prevItem:{title:"LoopBack is participating in Hacktoberfest 2020",permalink:"/2020-hacktoberfest"},nextItem:{title:"LoopBack 4 August 2020 Milestone Update",permalink:"/august-2020-milestone"}},c={authorsImageUrls:[void 0]},u=[{value:"Enriching LoopBack and its Community - You are Invited!",id:"enriching-loopback-and-its-community---you-are-invited",children:[],level:2}],m={toc:u};function k(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Originally published on ",(0,r.kt)("a",{parentName:"em",href:"https://strongloop.com"},"strongloop.com"))),(0,r.kt)("p",null,'Welcome back to the September edition of the "Community Q&A Monthly Digest", in which we are curating some of the Q&A that we think it might be helpful to you. Thank you for posting your questions and helping your fellow LoopBack users. '),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw"},"LoopBack Slack community")," is a platform where LoopBack users are helping each other out. If you haven't joined already, sign up today!"),(0,r.kt)("p",null,"Let's take a look at some of the questions and answers from the community."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Question:")," Is it possible to use auto-generate timestamp property in a model?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:")," To set the property to the current datetime upon Model Create, you can:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"@property({\ntype: 'date',\ndefaultFn: 'now',\n})\ntimestamp?: string;\n")),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Question:")," Does LoopBack has any built-in cache? Or should we implement that to make response even faster?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:"),"\nWe currently don\u2019t but there are some example implementations for your reference:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/tree/master/packages/rest/src/__tests__/acceptance/caching-interceptor"},"caching interceptor")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/blob/master/examples/greeting-app/src/caching-service.ts"},"caching service"))),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Question:")," I want to perform schema migration but the order of tables is important beacause there are some relation and foreign key between them. How can I set the order of tables to be migrated?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:")," Within ",(0,r.kt)("inlineCode",{parentName:"p"},"migrate.ts"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"app.migrateSchema")," accepts a ",(0,r.kt)("inlineCode",{parentName:"p"},"model")," array. So it can be updated as such:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"await app.migrateSchema(Object.assign(<SchemaMigrationOptions>{\nmodels: [/* Add model names here */]\n}, existingSchema));\n")),(0,r.kt)("p",null,"Like with any auto-migration, please do take a backup of the database before running the migration."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Question:")," I wanted to implement an API like the ",(0,r.kt)("inlineCode",{parentName:"p"},"file-transfer")," example on the docs but with more endpoints with different storage directories. How is that possible?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:")," You can have different endpoints backed by different methods using ",(0,r.kt)("inlineCode",{parentName:"p"},"post /<url>")," decoration as you see at ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/blob/master/examples/file-transfer/src/controllers/file-upload.controller.ts#L28"},"https://github.com/strongloop/loopback-next/blob/master/examples/file-transfer/src/controllers/file-upload.controller.ts#L28"),". If you want to calculate the file path per request, you can instantiate a new upload service instance instead of using the injected one."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Questions:")," I work with LoopBack in a k8 cluster, when i try to implement JWT authentication, all users get the same token, and the data in that token is not equal to that user. Is there any way to fix it besides saving the token in a database? "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:")," Typically JWT tokens are generated using a combination of a secret and some sort of UUID of the user. When they successfully authenticate, a token is generated and returned. When you need to verify the token, you decode it using the secret, giving you the UUID of the user. This means that you don\u2019t actually have to save a token at all. Here\u2019s how we are generating tokens for our users."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const userInfoForToken = {\nid: userProfile.id,\nname: userProfile.name,\nroles: userProfile.roles,\n};\n// Generate a JSON Web Token\nlet token: string;\ntry {\ntoken = await signAsync(userInfoForToken, this.jwtSecret, {\nexpiresIn: Number(this.jwtExpiresIn),\n});\n} catch (error) {\nthrow new HttpErrors.Unauthorized(`Error encoding token : ${error}`);\n}\n")),(0,r.kt)("p",null,"In this context, ",(0,r.kt)("inlineCode",{parentName:"p"},"signAsync")," is a ",(0,r.kt)("inlineCode",{parentName:"p"},"promisify"),"\u2019d version of ",(0,r.kt)("inlineCode",{parentName:"p"},"jsonwebtoken.sign()"),"."),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Question:")," I want to use the LoopBack app cli-command programmatically. Is this possible?"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Answer:"),"\nYou can try to ",(0,r.kt)("inlineCode",{parentName:"p"},"require('@loopback/cli/lib/cli')"),". See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/strongloop/loopback-next/blob/master/packages/cli/lib/cli.js"},"https://github.com/strongloop/loopback-next/blob/master/packages/cli/lib/cli.js"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"cli.js")," has logic to create yeoman env and register generators."),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"enriching-loopback-and-its-community---you-are-invited"},"Enriching LoopBack and its Community - You are Invited!"),(0,r.kt)("p",null,"As mentioned in our ",(0,r.kt)("a",{parentName:"p",href:"https://strongloop.com/strongblog/2020-community-contribution/"},"recent blog post"),", your contribution is important to make LoopBack a sustainable open source project. "),(0,r.kt)("p",null,"Here is what you can do:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw"},"Join LoopBack Slack community")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22"},"Look for first-contribution-friendly issues")),(0,r.kt)("li",{parentName:"ul"},"Give us feedback and join our discussion in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/strongloop/loopback-next"},"our GitHub repo"))),(0,r.kt)("p",null,"Let's make LoopBack a better framework together!"))}k.isMDXComponent=!0}}]);